plugins {
    id 'java'
    id 'application'
    id 'checkstyle'
    id 'pmd'
    id 'com.github.spotbugs' version '6.0.15'
}

group = 'org.example'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation 'junit:junit:4.13.2'
}

application {
    mainClass = 'Main'
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)   // ‚Üê CHANGED FROM 21 TO 17
    }
}

/* ======================
   CHECKSTYLE CONFIG
   ====================== */

checkstyle {
    toolVersion = '10.12.5'
    configFile = file("config/checkstyle/checkstyle.xml")
    ignoreFailures = false
    showViolations = true
}

tasks.withType(Checkstyle).configureEach {
    configDirectory = file("config/checkstyle")
    reports {
        xml.required = false
        html.required = true
    }
}

/* ======================
   SPOTBUGS CONFIG
   ====================== */

spotbugs {
    toolVersion = '4.8.6'
}

tasks.withType(com.github.spotbugs.snom.SpotBugsTask).configureEach {
    reports {
        xml.required = false
        html.required = true
    }
}

/* ======================
   PMD CONFIG
   ====================== */

pmd {
    toolVersion = "6.55.0"
    ruleSetFiles = files("config/pmd/pmd.xml")
    ruleSets = []
    ignoreFailures = true
}

tasks.withType(Pmd).configureEach {
    reports {
        xml.required = false
        html.required = true
    }
}

